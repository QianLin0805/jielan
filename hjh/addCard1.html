<!doctype html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html;charset=utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<title>添加银行卡</title>
<link rel="stylesheet" href="css/style.css" />
<link rel="stylesheet" href="css/bank.css" />
<script type="text/javascript" src="js/jquery.js"></script>
</head>
<body>
<div class="addCard addCard1">
	<h4>请绑定持卡人本人的银行卡</h4>
    <ul>
    	<li><span>姓名：</span><input type="text" id="name" placeholder="输入姓名" /></li>
    	<li><span>身份证：</span><input type="tel" id="idCard" placeholder="请输入持卡人身份证号" /></li>
    	<li><span>银行卡号：</span><input type="tel" id="bank" placeholder="请输入银行卡号" /></li>
    </ul>
    <p><a href="protovol.html">同意《银联支付协议》</a><span id="support">支持银行</span></p>
    <span class="next">下一步</span>
    <div class="sup_box">
    	<ol class="banklist">
	    	<li>借记卡</li>
	    	<li>中国工商银行</li>
	    	<li>中国农业银行</li>
	    	<li>中国银行</li>
	    	<li>中车建设银行</li>
	    	<li>中国招商银行</li>
	    	<li>中国邮政储蓄</li>
	    	<li>广发银行</li>
	    	<li>民生银行</li>
	    	<li>兴业银行</li>
	    	<li>广州银行</li>
	    	<li>光大银行</li>
	    	<li>湖北农村信用社联合社</li>
	    	<li>海南农村信用社（海口农村商业银行）</li>
	    	<li>天津农村商业银行</li>
	    	<li>天津银行</li>
	    </ol>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
$(function(){
	(function(){
		var pk=$(window).width();
		for(var i=0;i<$('input').length;i++){
			var spanWidth=$('input').eq(i).prev().innerWidth();
			$('input').eq(i).css({
				width:pk-spanWidth-35+'px'
			});
		}
	})();
	function btnColor(){
		if($('#name').val()!=''&&$('#idCard').val()!=''&&$('#bank').val()!=''){
			$('.next').css('background','#fa5050');
		}else{
			$('.next').css('background','#ccc');
		}
	}
	var name=false,idCard=false,bank=false;
	$('#name').on('keyup',function(){
		($(this).val()=='')?name=false:name=true;
		btnColor()
	});
	//验证身份证
	$('#idCard').on('keyup',function(){
		var cardVal=$(this).val();
		var ptnCard=/^\d+[X]?$/g;
		var ptnCard1=/^\d{15}$/g;
		var ptnCard2=/^\d{17}[0-9X]?$/g;
		btnColor()
		//限制只能输入数字或字母X
		if(!ptnCard.test(cardVal)){
			$(this).val(cardVal.replace(/[^\dX]/g,''));
		}
		if($(this).val().length>18&&event.keyCode!=8){
			$(this).val($(this).val().substr(0,18));
		}
		//验证身份证
		if(ptnCard1.test(cardVal)||ptnCard2.test(cardVal)){
			idCard=true;
		}else{
			idCard=false;
		}
	});
	$('#bank').on('keyup',function(){
		var bankVal=$(this).val();
		var ptnBank=/^\d+$/g;
		var ptnBank1=/^\d{16,20}$/g;
		btnColor()
		//限制只能输入数字
		if(!ptnBank.test(bankVal)){
			$(this).val(bankVal.replace(/\D/g,''));
		}
		if($(this).val().length>20&&event.keyCode!=8){
			$(this).val($(this).val().substr(0,20));
		}
		if(!ptnBank1.test(bankVal)){
			return bank=false;
		}
		bank=true;
	});
	$('.next').on('click',function(){
		if(name&&idCard&&bank){
			window.location.href='addCard2.html';
		}
	});
	//支持银行
	$('#support').on('touchend',function(){
		$('.sup_box').show();
	});
	$('.sup_box').on('touchstart',function(event){
		//alert()
		if($(event.target).closest('.banklist').length==0){
			$('.sup_box').hide();
		}
	});
})
</script>